"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _video=require("video.js");var _video2=_interopRequireDefault(_video);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var defaults={};var onPlayerReady=function onPlayerReady(player,options){player.addClass("vjs-nle-controls");var framerate=options.framerate?options.framerate:24;if(options.frameControls){initControls(player,framerate)}if(options.smpteTimecode){initSMPTE(player,framerate)}};var initControls=function initControls(player,framerate){var keyDown=function keyDown(event){var keyName=event.keyCode;var frame=1/framerate;switch(keyName){case 37:event.preventDefault();frameReverse(player,frame);break;case 39:event.preventDefault();frameForward(player,frame);break;case 32:event.preventDefault();playControl(player);break}};document.addEventListener("keydown",keyDown,false)};var frameReverse=function frameReverse(player,frame){var currentTime=player.currentTime();if(currentTime>0){var decrement=currentTime-frame;player.currentTime(decrement)}};var frameForward=function frameForward(player,frame){var currentTime=player.currentTime();var duration=player.duration();if(currentTime<duration){var increment=Math.min(duration,currentTime+frame);player.currentTime(increment)}};var playControl=function playControl(player){if(player.paused()){player.play()}else{player.pause()}};var toSMPTE=function toSMPTE(currentTime,framerate){var currentFrame=currentTime*framerate;var hours=Math.floor(currentTime/3600);var minutes=Math.floor(currentTime/60);var seconds=parseInt(currentTime-hours*3600-minutes*60);var frames=parseInt(currentFrame%framerate);var timecodeArray=[hours,minutes,seconds,frames];var processedTimecodeArray=[];timecodeArray.forEach(function(time){if(time<10){var timeString="0"+time;processedTimecodeArray.push(timeString)}else{var _timeString=time.toString();processedTimecodeArray.push(_timeString)}});return processedTimecodeArray.join(":")};var initSMPTE=function initSMPTE(player,framerate){var setCurrentTimeDisplay=function setCurrentTimeDisplay(){var currentTimeDisplay=player.controlBar.progressControl.seekBar.playProgressBar.el();var currentTime=player.currentTime();currentTimeDisplay.dataset.currentTime=toSMPTE(currentTime,framerate)};var setRemainingTimeDisplay=function setRemainingTimeDisplay(){var currentTime=player.currentTime();var duration=player.duration();var remainingTimeDisplay=player.controlBar.remainingTimeDisplay.el();remainingTimeDisplay.innerHTML='<div class="vjs-remaining-time-display" aria-live="off"><span class="vjs-control-text">Remaining Time</span>'+toSMPTE(currentTime,framerate)+" / "+toSMPTE(duration,framerate)+"</div>"};player.on("timeupdate",setCurrentTimeDisplay);player.on("timeupdate",setRemainingTimeDisplay)};var nleControls=function nleControls(options){var _this=this;this.ready(function(){onPlayerReady(_this,_video2.default.mergeOptions(defaults,options))})};_video2.default.plugin("nleControls",nleControls);nleControls.VERSION="__VERSION__";exports.default=nleControls;